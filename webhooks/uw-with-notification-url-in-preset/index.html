<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="icon" href="../../assets/favicon.png" type="image/png" />
    <title>Cloudinary Upload Widget</title>
    <script
      src="https://upload-widget.cloudinary.com/2.1.15/global/all.js"
      type="text/javascript"
    ></script>

  
    <script>
      /***
       *  You need to use an unsigned preset if you want to upload
       *  and you're working in the Front End. 
       *  Fill in your <CLOUD_NAME> and open this 
       *  page in a browser.  Click on button to upload.
       *  After the upload, check your webhook endpoint to see the upload response.
       ***/

      document.addEventListener('DOMContentLoaded', (event) => {
        var myWidget = cloudinary.createUploadWidget(
          {
            cloudName: 'cloudinary-training',
            uploadPreset: 'track-with-webhook',
          },
          (error, result) => {
            if (!error && result && result.event === 'success') {
              console.log('Done! Here is the image info: ', result.info);
            }
          }
        );

        document.getElementById('upload_widget').addEventListener(
          'click',
          function () {
            myWidget.open();
          },
          false
        );
      });
    </script>
  </head>

  <body>
    <h1>Upload Widget</h1>

    <h2>Using an unsigned preset that posts to a webhook</h2>
    <div>
      <button id="upload_widget" class="cloudinary-button">Upload files</button>
    </div>
    <div>
      <img id="uploaded" />
    </div>
  </body>
</html>
